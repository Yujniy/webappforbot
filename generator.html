<!DOCTYPE html>
<html>

<head>
    <title>Password Generator - Telegram Mini App</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }

        h1 {
            color: #333;
        }

        #password {
            font-size: 24px;
            font-weight: bold;
            margin: 20px 0;
        }

        button {
            font-size: 18px;
            padding: 10px 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .mainbtn {
            font-size: 18px;
            padding: 10px 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 20px;
        }

        .star {
            position: absolute;
            top: -20px;
            font-size: 20px;
            color: #ffcc00;
            animation: falling 1s linear infinite;
        }

        @keyframes falling {
            0% {
                transform: translateY(-20px);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
  <div id="generatorScreen">
    <h1>Password Generator</h1>
    <p>Click the button below to generate a random password:</p>
    <div id="password"></div>
    <button id="generateBtn">Generate Password</button>
    <button class="mainbtn" id="historyBtn">Password History</button>
  </div>

  <div id="historyScreen" style="display: none;">
    <h2>Generation History</h2>
    <ul id="historyList"></ul>
    <button class="mainbtn" id="backBtn">Back</button>
  </div>

<script>
  let passwordHistory = [];

  // Загрузка истории паролей из локального хранилища при загрузке страницы
  window.addEventListener("load", function() {
    const storedHistory = localStorage.getItem("passwordHistory");
    if (storedHistory) {
      passwordHistory = JSON.parse(storedHistory);
    }
  });

  function generatePassword() {
    const length = 12;
    const charset = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+";
    let password = "";

    for (let i = 0; i < length; i++) {
      const randomIndex = Math.floor(Math.random() * charset.length);
      password += charset[randomIndex];
    }

    return password;
  }

  function createStar() {
    const star = document.createElement("div");
    star.className = "star";
    star.textContent = "★";
    star.style.left = Math.random() * window.innerWidth + "px";
    document.body.appendChild(star);

    setTimeout(function() {
      star.remove();
    }, 1000);
  }

document.getElementById("generateBtn").addEventListener("click", function() {
    const password = generatePassword();
    document.getElementById("password").textContent = password;
    passwordHistory.push(password);

    // Сохранение истории паролей в локальном хранилище
    localStorage.setItem("passwordHistory", JSON.stringify(passwordHistory));

    // Создание эффекта падающих звездочек
    for (let i = 0; i < 20; i++) {
      setTimeout(createStar, i * 100);
    }
  });

  document.getElementById("historyBtn").addEventListener("click", function() {
    const historyList = document.getElementById("historyList");
    historyList.innerHTML = "";

    passwordHistory.forEach(function(password) {
      const listItem = document.createElement("li");
      listItem.textContent = password;
      historyList.appendChild(listItem);
    });

    document.getElementById("generatorScreen").style.display = "none";
    document.getElementById("historyScreen").style.display = "block";
  });

  document.getElementById("backBtn").addEventListener("click", function() {
    document.getElementById("historyScreen").style.display = "none";
    document.getElementById("generatorScreen").style.display = "block";
  });
</script>

</body>
</html>

